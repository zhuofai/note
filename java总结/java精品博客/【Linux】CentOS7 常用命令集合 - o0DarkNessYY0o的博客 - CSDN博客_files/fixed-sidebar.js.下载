!function(d,t){if(void 0===d.csdn&&(d.csdn={}),!jQuery)return;d.csdn.fixedSidebar=function(t){var i={targetBox:$(".persion_article"),mainBox:$("main"),sidebar:$("aside"),direction:"right",position:"fixed",top:0,bottom:0,zIndex:99,sidebarRightMargin:8,sidebarLeftMargin:15};t&&$.extend(i,t);var o=i.sidebar.width(),s=i.targetBox.offset().top,r=$(d).scrollLeft(),n=!0,a=0;function e(){a=r,r=$(d).scrollLeft();var t,e=i.sidebar.offset().left-$(d).scrollLeft()+(a-r);t=$(d).scrollTop(),s+i.sidebar.height()<=$(d).height()?s<t?i.sidebar.css({position:i.position,top:parseInt(i.top)+"px","z-index":parseInt(i.zIndex),left:e,width:o,bottom:"auto"}):i.sidebar.removeAttr("style"):i.mainBox.height()>i.sidebar.height()?i.targetBox.height()<=$(d).height()&&s-t+i.targetBox.height()<=$(d).height()?i.sidebar.css({position:i.position,bottom:parseInt(i.bottom)+"px","z-index":parseInt(i.zIndex),left:e,width:o,top:"auto"}):i.targetBox.height()>$(d).height()&&s<t&&i.targetBox.height()-s-t<=$(d).height()?i.sidebar.css({position:i.position,bottom:parseInt(i.bottom)+"px","z-index":parseInt(i.zIndex),left:e,width:o,top:"auto"}):i.sidebar.removeAttr("style"):i.sidebar.removeAttr("style"),n=!0}e(),$(d).on("scroll",function(){n&&(setTimeout(e,200),n=!1)}),$(d).on("resize",function(){var t,e=$(d).scrollTop();t="right"===i.direction?i.mainBox.offset().left+i.mainBox.width()+parseInt(i.sidebarLeftMargin)/3:i.mainBox.offset().left-i.sidebar.width()-parseInt(i.sidebarRightMargin),i.mainBox.height()>i.sidebar.height()&&s<e&&s+i.targetBox.height()>=$(d).height()?i.sidebar.css({position:i.position,left:t,bottom:parseInt(i.bottom)+"px","z-index":parseInt(i.zIndex),left:t,width:o,top:"auto"}):s+i.sidebar.height()<=$(d).height()&&s<e?i.sidebar.css({position:i.position,top:parseInt(i.top)+"px","z-index":parseInt(i.zIndex),left:t,width:o,bottom:"auto"}):i.sidebar.removeAttr("style")})}}(window,document);